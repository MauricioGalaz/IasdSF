<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pauta Lit√∫rgica Sab√°tica - IASD Limache</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;900&display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        adventist: { blue: '#00305e', gold: '#fec325', bg: '#f1f5f9' }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Outfit', sans-serif;
        }

        /* .input-pauta convertido a CSS puro */
        .input-pauta {
            width: 100%;
            padding: 0.75rem;
            /* p-3 */
            background-color: #f1f5f9;
            /* bg-slate-100 */
            border: 2px solid transparent;
            border-radius: 0.75rem;
            /* rounded-xl */
            font-weight: 700;
            outline: none;
            transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
        }

        .input-pauta:focus {
            border-color: #fec325;
            /* focus:border-adventist-gold */
            background-color: white;
            /* focus:bg-white */
        }

        /* .step-box convertido a CSS puro */
        .step-box {
            border-left-width: 4px;
            border-left-style: solid;
            border-left-color: #00305e;
            /* border-adventist-blue */
            background-color: white;
            padding: 1rem;
            /* p-4 */
            border-top-right-radius: 0.75rem;
            border-bottom-right-radius: 0.75rem;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            /* shadow-sm */
            margin-bottom: 1rem;
        }

        #export-area {
            position: absolute;
            left: -9999px;
            top: 0;
            width: 800px;
            background: white;
        }

        .pdf-header {
            border-bottom: 4px solid #fec325;
            padding-bottom: 20px;
            margin-bottom: 20px;
        }

        .pdf-section-title {
            background: #00305e;
            color: white;
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: 900;
            text-transform: uppercase;
            margin: 20px 0 10px 0;
        }
    </style>
</head>

<body class="bg-adventist-bg pb-28">

    <a href="index.html"
        class="bg-slate-800 p-2 md:p-3 rounded-xl border border-slate-600 hover:bg-blue-600 transition-all shadow-lg flex items-center gap-2 group">
        <span class="text-white group-hover:scale-110 transition-transform">üè†</span>
        <span class="hidden md:block text-[10px] font-black text-white uppercase tracking-tighter">Inicio</span>
    </a>

    <div class="max-w-4xl mx-auto p-4 md:p-8">
        <header class="text-center mb-8 no-print">
            <h1 class="text-3xl font-black text-adventist-blue uppercase tracking-tighter">Guion de Culto Sab√°tico</h1>
            <p class="text-slate-500 font-bold italic">IASD San Francisco de Limache</p>
        </header>

        <main id="form-ui" class="bg-white rounded-[2.5rem] shadow-xl p-6 md:p-10 border border-slate-200">

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-10">
                <div>
                    <label class="text-[10px] font-black uppercase text-slate-400 mb-1 block ml-2">S√°bado Fecha</label>
                    <input type="date" id="fecha" class="input-pauta text-adventist-blue">
                </div>
                <div>
                    <label class="text-[10px] font-black uppercase text-slate-400 mb-1 block ml-2">Predicador(a)</label>
                    <input type="text" id="predicador" placeholder="Nombre completo" class="input-pauta">
                </div>
            </div>

            <section class="mb-12">
                <div class="flex items-center gap-3 mb-6">
                    <i class="fas fa-music text-adventist-gold text-2xl"></i>
                    <h2 class="text-2xl font-black text-adventist-blue uppercase">I. Liturgia Inicial</h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <input type="text" id="acomp1" placeholder="Nombre Acompa√±ante 1" class="input-pauta">
                    <input type="text" id="tematica" placeholder="Tem√°tica de Cantos" class="input-pauta">
                </div>

                <div class="space-y-3">
                    <div class="step-box">
                        <p class="text-xs font-black text-adventist-blue uppercase opacity-50">Momento 1: Himnos Previos
                        </p>
                        <div class="flex gap-2 mt-2">
                            <input type="text" id="hp1" placeholder="H1"
                                class="w-20 p-2 bg-slate-100 rounded-lg text-center font-bold">
                            <input type="text" id="hp2" placeholder="H2"
                                class="w-20 p-2 bg-slate-100 rounded-lg text-center font-bold">
                            <input type="text" id="hp3" placeholder="H3"
                                class="w-20 p-2 bg-slate-100 rounded-lg text-center font-bold">
                        </div>
                    </div>

                    <div class="step-box">
                        <p class="font-bold">üö∂ Ingreso: <span class="text-slate-500">Himno 32 "Nos reunimos en tu
                                santuario"</span></p>
                        <p class="font-bold">üõê Plataforma: <span class="text-slate-500">Himno 135 "Cristo, nombre
                                sublime"</span></p>
                    </div>

                    <div class="step-box bg-slate-50 border-adventist-gold">
                        <p class="font-black text-adventist-blue text-sm mb-2 uppercase italic underline">Guion para
                            Acompa√±ante 1:</p>
                        <ul class="text-sm space-y-2 font-medium">
                            <li>‚ú® Saludo oficial y bienvenida a la congregaci√≥n.</li>
                            <li>üìΩÔ∏è Presentaci√≥n e invitaci√≥n a ver video misionero "Probad y Ved".</li>
                            <li>üé∂ Invitar a entonar Himno #525 "Con gratitud llegamos".</li>
                            <li>üí∞ Invitar al Diaconado para la oraci√≥n de Diezmos y Ofrendas.</li>
                        </ul>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                        <input type="text" id="diacono" placeholder="Di√°cono de oraci√≥n"
                            class="input-pauta border-l-4 border-adventist-gold">
                        <input type="text" id="himno_i" placeholder="Himno Inicial del Culto"
                            class="input-pauta border-l-4 border-adventist-gold">
                    </div>
                </div>
            </section>

            <section>
                <div class="flex items-center gap-3 mb-6">
                    <i class="fas fa-bible text-adventist-gold text-2xl"></i>
                    <h2 class="text-2xl font-black text-adventist-blue uppercase">II. Bloque Espiritual</h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <input type="text" id="acomp2" placeholder="Nombre Acompa√±ante 2" class="input-pauta">
                    <input type="text" id="lectura" placeholder="Lectura B√≠blica (Cita)" class="input-pauta">
                </div>

                <div class="space-y-3">
                    <div class="step-box">
                        <p class="font-bold">üìñ Lectura: <span class="text-slate-400 font-normal italic">(El acompa√±ante
                                2 lee el texto b√≠blico)</span></p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <input type="text" id="infantil" placeholder="Relatador Historia Infantil" class="input-pauta">
                        <input type="text" id="especial" placeholder="Nombre Alabanza Especial" class="input-pauta">
                    </div>

                    <div class="step-box bg-slate-50 border-adventist-gold">
                        <p class="font-black text-adventist-blue text-sm mb-2 uppercase italic underline">Guion para
                            Acompa√±ante 2:</p>
                        <ul class="text-sm space-y-2 font-medium">
                            <li>üé§ Presentaci√≥n del Predicador(a) del d√≠a.</li>
                            <li>üôè Al finalizar el serm√≥n, dirigir el Himno Final.</li>
                            <li>üõê Solicitar la Oraci√≥n de cierre al Predicador(a).</li>
                        </ul>
                    </div>

                    <div class="step-box">
                        <input type="text" id="himno_f" placeholder="Himno Final" class="input-pauta mb-4">
                        <p class="font-bold text-sm">üéµ Salida Plataforma: <span class="text-slate-500">Himno 41</span>
                        </p>
                        <p class="font-bold text-sm">üéµ Salida Miembros: <span class="text-slate-500">Himno 37</span>
                        </p>
                    </div>
                </div>
            </section>
        </main>

        <div class="fixed bottom-6 left-0 right-0 z-50 px-6 no-print">
            <div class="max-w-md mx-auto">
                <button onclick="descargarPauta()"
                    class="w-full bg-adventist-blue text-white py-5 rounded-2xl font-black uppercase shadow-2xl flex items-center justify-center gap-3 hover:scale-[1.02] transition-all">
                    <i class="fas fa-file-pdf text-adventist-gold"></i> Descargar Pauta Completa PDF
                </button>
            </div>
        </div>
    </div>

    <div id="export-area"></div>

    <script>
        async function descargarPauta() {
            const area = document.getElementById('export-area');
            const fechaVal = document.getElementById('fecha').value || 'S√°bado';

            // Construcci√≥n del documento paso a paso para el PDF
            area.innerHTML = `
                <div style="padding: 40px;">
                    <div class="pdf-header text-center">
                        <h1 style="color: #00305e; font-size: 28px; font-weight: 900; margin: 0;">ORDEN DEL CULTO ADORACI√ìN</h1>
                        <p style="color: #64748b; font-weight: bold; margin-top: 5px;">IASD SAN FRANCISCO DE LIMACHE ‚Äî ${fechaVal}</p>
                    </div>

                    <div style="background: #f8fafc; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                        <p><b>Predicador(a):</b> ${document.getElementById('predicador').value || '---'}</p>
                    </div>

                    <div class="pdf-section-title">I. Liturgia Inicial (Acompa√±ante 1: ${document.getElementById('acomp1').value || '---'})</div>
                    <div style="padding-left: 10px; font-size: 14px; line-height: 1.8;">
                        <p>üéµ <b>Tem√°tica:</b> ${document.getElementById('tematica').value || '---'}</p>
                        <p>üéπ <b>Himnos Previos:</b> ${document.getElementById('hp1').value || '-'} | ${document.getElementById('hp2').value || '-'} | ${document.getElementById('hp3').value || '-'}</p>
                        <p>üö∂ <b>Himno Ingreso:</b> Himno 32 | üõê <b>Himno Plataforma:</b> Himno 135</p>
                        <p>üì¢ <b>Acci√≥n:</b> Saludo y Bienvenida oficial.</p>
                        <p>üìΩÔ∏è <b>Acci√≥n:</b> Video misionero "Probad y Ved".</p>
                        <p>üé∂ <b>Acci√≥n:</b> Himno #525 "Con gratitud llegamos".</p>
                        <p>üí∞ <b>Oraci√≥n Ofrendas:</b> ${document.getElementById('diacono').value || '---'}</p>
                        <p style="background: #f1f5f9; padding: 8px; border-radius: 5px; margin-top: 5px;">üéº <b>HIMNO INICIAL:</b> ${document.getElementById('himno_i').value || '---'}</p>
                    </div>

                    <div class="pdf-section-title">II. Bloque Espiritual (Acompa√±ante 2: ${document.getElementById('acomp2').value || '---'})</div>
                    <div style="padding-left: 10px; font-size: 14px; line-height: 1.8;">
                        <p>üìñ <b>Lectura B√≠blica:</b> ${document.getElementById('lectura').value || '---'}</p>
                        <p>üë∂ <b>Historia Infantil:</b> ${document.getElementById('infantil').value || '---'}</p>
                        <p>üéµ <b>Alabanza Especial:</b> ${document.getElementById('especial').value || '---'}</p>
                        <p>üé§ <b>Mensaje:</b> Presentaci√≥n y tiempo para el Predicador(a).</p>
                        <p style="background: #f1f5f9; padding: 8px; border-radius: 5px; margin-top: 5px;">üéº <b>HIMNO FINAL:</b> ${document.getElementById('himno_f').value || '---'}</p>
                        <p>üôè <b>Oraci√≥n Final:</b> Solicitada al Predicador(a).</p>
                        <p>üéµ <b>Salida:</b> Plataforma (Himno 41) | Membres√≠a (Himno 37)</p>
                    </div>

                    <div style="text-align: center; margin-top: 40px; font-size: 10px; color: #94a3b8; border-top: 1px solid #eee; padding-top: 20px;">
                        "Cosechando Esperanza en Limache"
                    </div>
                </div>
            `;

            try {
                const { jsPDF } = window.jspdf;
                const canvas = await html2canvas(area, { scale: 2, useCORS: true });
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;

                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save(`Pauta_Sabado_${fechaVal}.pdf`);
            } catch (err) {
                alert('Error al generar PDF');
            } finally {
                area.innerHTML = '';
            }
        }
    </script>
</body>

</html>